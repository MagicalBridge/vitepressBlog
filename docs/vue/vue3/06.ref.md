---
sidebar: auto
---

# Ref的实现原理

## Ref的基本概念
Vue3 中的 ref 用于创建响应式引用。响应式引用是指可以跟踪其值的引用。当响应式引用的值发生变化时，Vue 会自动更新依赖于该值的视图。

```js
const count = ref(0)

console.log('count 的值:', count.value) // 0

count.value = 1
console.log('count 的值:', count.value) // 1
```

- 在上面的代码中，count 是一个响应式引用，它引用了一个值为 0 的数字。
- console.log 语句会输出 count 的值。
- 当 count.value 被设置为 1 时，count 的值会发生变化，Vue 会自动更新依赖于 count 的视图。

ref的一些特点：
- ref 创建的引用是响应式的，这意味着当其值发生变化时，Vue 会自动更新。
- ref 可以用于任何数据类型，包括原始值、对象和数组。
- ref 可以嵌套使用，用于创建复杂的数据结构。


proxy代理的目标必须是非原始值，所以reactive不支持原始值类型。所以我们需要将原始值类型进行包装。

```js
const flag = ref(false)

effect(()=>{
  document.body.innerHTML = flag.value ? 30 : 'jw'
});

setTimeout(()=>{
  flag.value = true
}, 1000);

```