import{_ as e,c as s,o as i,aj as n}from"./chunks/framework.K2WCgrB4.js";const u=JSON.parse('{"title":"runtime-dom 和 runtime-core","description":"","frontmatter":{"sidebar":"auto"},"headers":[],"relativePath":"vue/vue3/07.renderer.md","filePath":"vue/vue3/07.renderer.md"}'),a={name:"vue/vue3/07.renderer.md"},l=n(`<h1 id="runtime-dom-和-runtime-core" tabindex="-1">runtime-dom 和 runtime-core <a class="header-anchor" href="#runtime-dom-和-runtime-core" aria-label="Permalink to &quot;runtime-dom 和 runtime-core&quot;">​</a></h1><p>Vue.js 3 中的 <code>runtime-dom</code> 和 <code>runtime-core</code> 是两个不同的包, 它们之间有以下主要区别:</p><ol><li><p><strong>功能范围</strong>:</p><ul><li><code>runtime-core</code>: 这是 Vue.js 的核心运行时,包含了 Vue 实例的创建、组件系统、响应式系统等核心功能。它是 Vue.js 的核心,可以在任何 JavaScript 运行环境中使用。</li><li><code>runtime-dom</code>: 这个包是专门为 DOM 环境设计的,它构建于 <code>runtime-core</code> 之上,提供了 DOM 特定的 API,例如 DOM 元素的创建、属性设置、事件处理等功能。</li></ul></li><li><p><strong>目标环境</strong>:</p><ul><li><code>runtime-core</code>: 这个包是平台无关的,可以在任何 JavaScript 运行环境中使用,包括浏览器、Node.js、Web Workers 等。</li><li><code>runtime-dom</code>: 这个包是专门为浏览器 DOM 环境设计的,无法在其他环境中使用。</li></ul></li><li><p><strong>依赖关系</strong>:</p><ul><li><code>runtime-dom</code> 依赖于 <code>runtime-core</code>,使用 <code>runtime-dom</code> 时会自动引入 <code>runtime-core</code>。</li><li><code>runtime-core</code> 是 Vue.js 的核心,可以单独使用,不依赖于 <code>runtime-dom</code>。</li></ul></li><li><p><strong>API 差异</strong>:</p><ul><li><code>runtime-core</code> 提供了一些核心的 API,如 <code>createApp</code>、<code>reactive</code>、<code>ref</code> 等,这些 API 在 <code>runtime-dom</code> 中也可以使用。</li><li><code>runtime-dom</code> 额外提供了一些 DOM 特定的 API,如 <code>createElement</code>、<code>patchProp</code> 等。</li></ul></li></ol><p>综上所述,<code>runtime-core</code> 是 Vue.js 的核心运行时,而 <code>runtime-dom</code> 则是为浏览器 DOM 环境特别设计的运行时。在开发 Vue.js 应用时,通常需要同时使用这两个包。</p><h2 id="自定义渲染器" tabindex="-1">自定义渲染器： <a class="header-anchor" href="#自定义渲染器" aria-label="Permalink to &quot;自定义渲染器：&quot;">​</a></h2><p>渲染器的作用是把虚拟DOM渲染为特定平台上的真实元素。在浏览器中，渲染器会把虚拟DOM渲染成真实DOM元素。</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">createRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> renderer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">element</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(element);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setElementText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    el.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">container</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    container.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(el)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">renderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;h1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>这段代码演示了如何使用 Vue.js 3 的 <code>createRenderer</code> API 创建一个自定义渲染器, 并使用它来渲染一个简单的 Vue.js 组件。</p><ol><li><p><code>const { createRenderer, h } = Vue;</code>: 从 Vue 中导入 <code>createRenderer</code> 和 <code>h</code> 函数。<code>createRenderer</code> 用于创建自定义渲染器,<code>h</code> 函数用于创建 Vue.js 虚拟 DOM 元素。</p></li><li><p><code>const renderer = createRenderer({ ... });</code>: 使用 <code>createRenderer</code> 创建一个自定义渲染器实例。这个渲染器实现了三个必要的方法:</p><ul><li><code>createElement(element)</code>: 创建一个 DOM 元素。在这个例子中,它只是调用 <code>document.createElement</code> 创建一个元素。</li><li><code>setElementText(el, text)</code>: 设置元素的文本内容。在这个例子中,它使用 <code>el.innerHTML = text</code> 实现。</li><li><code>insert(el, container)</code>: 将一个元素插入到容器中。在这个例子中,它使用 <code>container.appendChild(el)</code> 实现。</li></ul></li><li><p><code>renderer.render(h(&#39;h1&#39;, &#39;hello world&#39;), document.getElementById(&#39;app&#39;));</code>: 使用自定义渲染器渲染一个 Vue.js 组件。</p><ul><li><code>h(&#39;h1&#39;, &#39;hello world&#39;)</code>: 使用 <code>h</code> 函数创建一个虚拟 DOM 元素,表示一个 <code>&lt;h1&gt;</code> 标签,内容为 <code>&#39;hello world&#39;</code>。</li><li><code>document.getElementById(&#39;app&#39;)</code>: 获取 DOM 中 ID 为 <code>&#39;app&#39;</code> 的元素,作为渲染目标容器。</li><li><code>renderer.render()</code>: 调用渲染器的 <code>render</code> 方法,将虚拟 DOM 元素渲染到目标容器中。</li></ul></li></ol><p>这个例子展示了如何使用 Vue.js 3 的 <code>createRenderer</code> API 创建一个自定义渲染器,并使用它来渲染一个简单的 Vue.js 组件。这种自定义渲染器的能力使 Vue.js 能够在不同的运行时环境中使用,如服务器端渲染、原生移动应用等。</p>`,10),t=[l];function r(d,p,h,c,o,k){return i(),s("div",null,t)}const m=e(a,[["render",r]]);export{u as __pageData,m as default};
